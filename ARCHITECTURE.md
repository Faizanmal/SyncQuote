# SyncQuote - Architecture Overview

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (Next.js 14)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Dashboard       â”‚  â”‚  Proposals      â”‚  â”‚  Analytics      â”‚ â”‚
â”‚  â”‚  - Overview      â”‚  â”‚  - List         â”‚  â”‚  - Metrics      â”‚ â”‚
â”‚  â”‚  - Quick Stats   â”‚  â”‚  - Detail       â”‚  â”‚  - Funnel       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Templates      â”‚  â”‚  Settings       â”‚  â”‚  Notifications  â”‚ â”‚
â”‚  â”‚  - Gallery      â”‚  â”‚  - Branding     â”‚  â”‚  - Bell         â”‚ â”‚
â”‚  â”‚  - Create       â”‚  â”‚  - Profile      â”‚  â”‚  - Real-time    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  Components:                                                      â”‚
â”‚  â€¢ notification-bell.tsx   â€¢ analytics-dashboard.tsx            â”‚
â”‚  â€¢ template-gallery.tsx    â€¢ comment-thread.tsx                 â”‚
â”‚  â€¢ branding-settings.tsx                                         â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ HTTP/REST + WebSocket
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND (NestJS)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                   API MODULES                                â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  Core Modules:              New Feature Modules:            â”‚â”‚
â”‚  â”‚  â€¢ AuthModule               â€¢ TemplatesModule    âœ¨         â”‚â”‚
â”‚  â”‚  â€¢ UsersModule              â€¢ NotificationsModule âœ¨        â”‚â”‚
â”‚  â”‚  â€¢ ProposalsModule          â€¢ AnalyticsModule     âœ¨        â”‚â”‚
â”‚  â”‚  â€¢ CommentsModule (enhanced)â€¢ AuditModule         âœ¨        â”‚â”‚
â”‚  â”‚  â€¢ EventsModule (enhanced)                                  â”‚â”‚
â”‚  â”‚  â€¢ EmailModule                                               â”‚â”‚
â”‚  â”‚  â€¢ StorageModule                                             â”‚â”‚
â”‚  â”‚  â€¢ WebhooksModule                                            â”‚â”‚
â”‚  â”‚  â€¢ HealthModule                                              â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                REAL-TIME GATEWAY                             â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚  EventsGateway (Socket.io)                                  â”‚â”‚
â”‚  â”‚  â€¢ proposal:viewed                                           â”‚â”‚
â”‚  â”‚  â€¢ comment:added                                             â”‚â”‚
â”‚  â”‚  â€¢ notification:new        âœ¨                               â”‚â”‚
â”‚  â”‚  â€¢ user:joined             âœ¨                               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ Prisma ORM
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DATABASE (PostgreSQL)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  Core Tables:              New Tables:                           â”‚
â”‚  â€¢ User                    â€¢ Template          âœ¨               â”‚
â”‚  â€¢ Proposal                â€¢ Notification      âœ¨               â”‚
â”‚  â€¢ ProposalBlock           â€¢ AuditLog          âœ¨               â”‚
â”‚  â€¢ PricingItem                                                   â”‚
â”‚  â€¢ Comment (enhanced)      Enhanced Tables:                      â”‚
â”‚  â€¢ Activity                â€¢ User (+ branding)  âœ¨              â”‚
â”‚  â€¢ StripeWebhookEvent      â€¢ Proposal (+ workflow) âœ¨           â”‚
â”‚                            â€¢ Comment (+ threading) âœ¨            â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow

### 1. Real-Time Notifications Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚
â”‚   Views     â”‚
â”‚  Proposal   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ HTTP GET /v/{slug}
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend                                             â”‚
â”‚  1. Track view (AnalyticsService)                   â”‚
â”‚  2. Create audit log (AuditService)                 â”‚
â”‚  3. Create notification (NotificationsService)      â”‚
â”‚  4. Emit WebSocket event (EventsGateway)            â”‚
â”‚  5. Send email (EmailService)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ WebSocket: 'notification'
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚   Owner     â”‚
â”‚   Receives  â”‚
â”‚   Alert     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Template to Proposal Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User     â”‚
â”‚   Selects   â”‚
â”‚  Template   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ POST /templates/{id}/use
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TemplatesService                     â”‚
â”‚  1. Get template content              â”‚
â”‚  2. Increment use count               â”‚
â”‚  3. Create new proposal               â”‚
â”‚  4. Copy blocks from template         â”‚
â”‚  5. Create pricing items              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Returns new proposal
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚   Editor    â”‚
â”‚   Opens     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Analytics Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Proposal   â”‚
â”‚  Actions    â”‚
â”‚  (view,     â”‚
â”‚   comment,  â”‚
â”‚   sign)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Creates Activity
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Activity Table                       â”‚
â”‚  â€¢ type                               â”‚
â”‚  â€¢ proposalId                         â”‚
â”‚  â€¢ userId                             â”‚
â”‚  â€¢ metadata                           â”‚
â”‚  â€¢ timestamp                          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Aggregated by
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AnalyticsService                     â”‚
â”‚  â€¢ getOverviewMetrics()               â”‚
â”‚  â€¢ getProposalEngagement()            â”‚
â”‚  â€¢ getConversionFunnel()              â”‚
â”‚  â€¢ getActivityTimeline()              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Rendered in
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  Analytics  â”‚
â”‚  Dashboard  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ Module Dependencies

```
AppModule
â”œâ”€â”€ PrismaModule (used by all)
â”‚
â”œâ”€â”€ AuthModule
â”‚   â””â”€â”€ UsersModule
â”‚       â””â”€â”€ PrismaModule
â”‚
â”œâ”€â”€ ProposalsModule
â”‚   â”œâ”€â”€ PrismaModule
â”‚   â”œâ”€â”€ EventsModule
â”‚   â””â”€â”€ StorageModule
â”‚
â”œâ”€â”€ TemplatesModule âœ¨
â”‚   â””â”€â”€ PrismaModule
â”‚
â”œâ”€â”€ NotificationsModule âœ¨
â”‚   â”œâ”€â”€ PrismaModule
â”‚   â”œâ”€â”€ EventsModule
â”‚   â””â”€â”€ EmailModule
â”‚
â”œâ”€â”€ AnalyticsModule âœ¨
â”‚   â””â”€â”€ PrismaModule
â”‚
â”œâ”€â”€ AuditModule âœ¨
â”‚   â””â”€â”€ PrismaModule
â”‚
â”œâ”€â”€ CommentsModule (enhanced)
â”‚   â”œâ”€â”€ PrismaModule
â”‚   â””â”€â”€ EventsModule
â”‚
â””â”€â”€ EventsModule (enhanced)
    â”œâ”€â”€ PrismaModule
    â””â”€â”€ EmailModule
```

---

## ğŸ“Š Database Schema Relationships

```
User â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚          â”‚
             â”‚          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚ Proposal   â”‚  â”‚ Template â”‚ âœ¨
    â”‚            â”‚  â”‚          â”‚
    â”‚ â€¢ title    â”‚  â”‚ â€¢ name   â”‚
    â”‚ â€¢ status   â”‚  â”‚ â€¢ categoryâ”‚
    â”‚ â€¢ slug     â”‚  â”‚ â€¢ contentâ”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      â”‚          â”‚           â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â” â”‚     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Block  â”‚ â”‚     â”‚ Comment   â”‚ â”‚ Activity  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚ (enhanced)â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚     â”‚           â”‚
               â”‚     â”‚ â€¢ parentIdâ”‚ âœ¨
               â”‚     â”‚ â€¢ resolvedâ”‚ âœ¨
               â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ PricingItem   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚          â”‚           â”‚
        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚Notificationâ”‚ â”‚ AuditLog â”‚ â”‚ âœ¨
        â”‚           â”‚ â”‚          â”‚ â”‚
        â”‚ â€¢ type    â”‚ â”‚ â€¢ action â”‚ â”‚
        â”‚ â€¢ read    â”‚ â”‚ â€¢ changesâ”‚ â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                   â”‚
                              â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                              â”‚ Template  â”‚ âœ¨
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ API Endpoint Map

```
/api
â”œâ”€â”€ /auth
â”‚   â”œâ”€â”€ POST   /signup
â”‚   â”œâ”€â”€ POST   /login
â”‚   â”œâ”€â”€ POST   /logout
â”‚   â””â”€â”€ POST   /refresh
â”‚
â”œâ”€â”€ /users
â”‚   â”œâ”€â”€ GET    /profile
â”‚   â”œâ”€â”€ PATCH  /profile
â”‚   â””â”€â”€ GET    /me
â”‚
â”œâ”€â”€ /proposals
â”‚   â”œâ”€â”€ GET    /
â”‚   â”œâ”€â”€ POST   /
â”‚   â”œâ”€â”€ GET    /:id
â”‚   â”œâ”€â”€ PATCH  /:id
â”‚   â””â”€â”€ DELETE /:id
â”‚
â”œâ”€â”€ /templates âœ¨
â”‚   â”œâ”€â”€ GET    /
â”‚   â”œâ”€â”€ POST   /
â”‚   â”œâ”€â”€ GET    /:id
â”‚   â”œâ”€â”€ PATCH  /:id
â”‚   â”œâ”€â”€ DELETE /:id
â”‚   â””â”€â”€ POST   /:id/use
â”‚
â”œâ”€â”€ /notifications âœ¨
â”‚   â”œâ”€â”€ GET    /
â”‚   â”œâ”€â”€ GET    /unread-count
â”‚   â”œâ”€â”€ PATCH  /:id/read
â”‚   â””â”€â”€ POST   /mark-all-read
â”‚
â”œâ”€â”€ /analytics âœ¨
â”‚   â”œâ”€â”€ GET    /overview
â”‚   â”œâ”€â”€ GET    /engagement
â”‚   â”œâ”€â”€ GET    /funnel
â”‚   â””â”€â”€ GET    /activity
â”‚
â”œâ”€â”€ /audit âœ¨
â”‚   â”œâ”€â”€ GET    /logs
â”‚   â”œâ”€â”€ GET    /proposal/:id
â”‚   â””â”€â”€ GET    /export
â”‚
â””â”€â”€ /comments
    â”œâ”€â”€ GET    /
    â”œâ”€â”€ POST   /
    â””â”€â”€ PATCH  /:id/resolve âœ¨
```

---

## ğŸ” Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Client Request                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layer 1: Rate Limiting                â”‚
â”‚   â€¢ 100 requests per minute             â”‚
â”‚   â€¢ 5 auth attempts per minute          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layer 2: CORS                         â”‚
â”‚   â€¢ Allowed origins                     â”‚
â”‚   â€¢ Credentials enabled                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layer 3: JWT Authentication           â”‚
â”‚   â€¢ Token validation                    â”‚
â”‚   â€¢ User identification                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layer 4: Authorization                â”‚
â”‚   â€¢ Resource ownership check            â”‚
â”‚   â€¢ Role-based access                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layer 5: Audit Logging âœ¨            â”‚
â”‚   â€¢ IP address                          â”‚
â”‚   â€¢ User agent                          â”‚
â”‚   â€¢ Action tracking                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Controller Handler              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Performance Optimization Points

```
Frontend
â”œâ”€â”€ Code Splitting
â”‚   â”œâ”€â”€ Route-based
â”‚   â”œâ”€â”€ Component lazy loading
â”‚   â””â”€â”€ Dynamic imports
â”‚
â”œâ”€â”€ Caching
â”‚   â”œâ”€â”€ React Query
â”‚   â”œâ”€â”€ Local storage
â”‚   â””â”€â”€ Service worker (future)
â”‚
â””â”€â”€ Optimization
    â”œâ”€â”€ Image optimization (Next.js)
    â”œâ”€â”€ Bundle size reduction
    â””â”€â”€ Tree shaking

Backend
â”œâ”€â”€ Database
â”‚   â”œâ”€â”€ Indexes on key fields âœ…
â”‚   â”œâ”€â”€ Query optimization
â”‚   â””â”€â”€ Connection pooling
â”‚
â”œâ”€â”€ Caching (Redis)
â”‚   â”œâ”€â”€ Analytics results
â”‚   â”œâ”€â”€ Template lists
â”‚   â””â”€â”€ User sessions
â”‚
â””â”€â”€ API
    â”œâ”€â”€ Pagination
    â”œâ”€â”€ Field selection
    â””â”€â”€ Compression
```

---

## ğŸ”„ Real-Time Event Flow

```
WebSocket Events:

User Connects
    â”‚
    â”œâ”€â–º join_user (userId)
    â”‚   â””â”€â–º Server: Add to user:{userId} room
    â”‚
    â”œâ”€â–º join_proposal (proposalId)
    â”‚   â””â”€â–º Server: Add to proposal:{proposalId} room
    â”‚
    â””â”€â–º Server Events:
        â”‚
        â”œâ”€â–º notification (new notification) âœ¨
        â”‚   â””â”€â–º Emitted to: user:{userId}
        â”‚
        â”œâ”€â–º comment_added (new comment)
        â”‚   â””â”€â–º Emitted to: proposal:{proposalId}
        â”‚
        â”œâ”€â–º proposal_viewed (view event)
        â”‚   â””â”€â–º Emitted to: user:{ownerId}
        â”‚
        â””â”€â–º proposal_approved (signature)
            â””â”€â–º Emitted to: user:{ownerId}
```

---

## ğŸ¨ Component Hierarchy

```
App
â”œâ”€â”€ Providers
â”‚   â”œâ”€â”€ AuthProvider
â”‚   â”œâ”€â”€ QueryClientProvider
â”‚   â””â”€â”€ WebSocketProvider âœ¨
â”‚
â”œâ”€â”€ Layout
â”‚   â”œâ”€â”€ Header
â”‚   â”‚   â”œâ”€â”€ Logo
â”‚   â”‚   â”œâ”€â”€ Navigation
â”‚   â”‚   â””â”€â”€ NotificationBell âœ¨
â”‚   â”‚
â”‚   â””â”€â”€ Sidebar
â”‚       â”œâ”€â”€ DashboardLink
â”‚       â”œâ”€â”€ ProposalsLink
â”‚       â”œâ”€â”€ TemplatesLink âœ¨
â”‚       â”œâ”€â”€ AnalyticsLink âœ¨
â”‚       â””â”€â”€ SettingsLink
â”‚
â””â”€â”€ Pages
    â”œâ”€â”€ Dashboard
    â”‚   â”œâ”€â”€ Overview
    â”‚   â””â”€â”€ QuickStats
    â”‚
    â”œâ”€â”€ Proposals
    â”‚   â”œâ”€â”€ ProposalList
    â”‚   â””â”€â”€ ProposalDetail
    â”‚       â””â”€â”€ CommentThread âœ¨
    â”‚
    â”œâ”€â”€ Templates âœ¨
    â”‚   â””â”€â”€ TemplateGallery âœ¨
    â”‚
    â”œâ”€â”€ Analytics âœ¨
    â”‚   â””â”€â”€ AnalyticsDashboard âœ¨
    â”‚
    â””â”€â”€ Settings
        â”œâ”€â”€ Profile
        â””â”€â”€ BrandingSettings âœ¨
```

---

## ğŸš€ Deployment Architecture

```
Production Environment:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Vercel (Frontend)                â”‚
â”‚         â€¢ Next.js SSR                    â”‚
â”‚         â€¢ Edge Functions                 â”‚
â”‚         â€¢ CDN                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ HTTPS
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      AWS ECS (Backend)                  â”‚
â”‚      â€¢ Docker Container                  â”‚
â”‚      â€¢ Auto-scaling                      â”‚
â”‚      â€¢ Load Balancer                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚             â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AWS RDS         â”‚  â”‚ ElastiCache  â”‚  â”‚ S3        â”‚
â”‚ (PostgreSQL)    â”‚  â”‚ (Redis)      â”‚  â”‚ (Storage) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Monitoring Stack

```
Observability:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Application                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚            â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sentry          â”‚  â”‚ Pino       â”‚  â”‚ Analytics â”‚
â”‚ (Errors)        â”‚  â”‚ (Logs)     â”‚  â”‚ (Metrics) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture diagram provides a visual overview of how all the components work together in the SyncQuote system! ğŸ¯
